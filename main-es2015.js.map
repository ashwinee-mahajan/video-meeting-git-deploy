{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/environments/environment.ts","./src/main.ts","ws (ignored)"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import {\n  Component,\n  OnInit,\n  ViewChild,\n  ViewChildren,\n  ElementRef,\n  QueryList,\n} from '@angular/core';\nimport { Socket } from 'ngx-socket-io';\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class AppComponent implements OnInit {\n  title = 'webrtcsampleapp';\n\n  room = !location.pathname.substring(1)\n    ? 'home'\n    : location.pathname.substring(1);\n  remotePeers: Array<any> = new Array();\n\n  @ViewChild('myVideo')\n  myVideo: ElementRef<HTMLVideoElement>;\n\n  /** @type {RTCConfiguration} */\n  config = {\n    iceServers: [\n      {\n        urls: ['stun:stun.l.google.com:19302'],\n      },\n    ],\n  };\n\n  /** @type {MediaStreamConstraints} */\n  constraints = {\n    audio: true,\n    video: { facingMode: 'user' },\n  };\n\n  peerConnections = {};\n\n  constructor(private socket: Socket) {}\n\n  ngOnInit() {\n    if (this.room && !!this.room) {\n      this.socket.emit('join', this.room);\n    }\n\n    navigator.mediaDevices\n      .getUserMedia(this.constraints)\n      .then((stream) => {\n        this.myVideo.nativeElement.srcObject = stream;\n        this.myVideo.nativeElement.play();\n        this.socket.emit('ready');\n      })\n      .catch(getUserMediaError);\n\n    function getUserMediaError(error) {\n      console.error(error);\n    }\n\n    this.socket.on('ready', async (id) => {\n      \n      const peerConnection = new RTCPeerConnection(this.config);\n      this.peerConnections[id] = peerConnection;\n\n      await navigator.mediaDevices\n        .getUserMedia(this.constraints)\n        .then((stream) => {\n          stream\n            .getTracks()\n            .forEach((track) => peerConnection.addTrack(track, stream));\n        });\n      \n      peerConnection\n        .createOffer()\n        .then((sdp) => peerConnection.setLocalDescription(sdp))\n        .then(() => {\n          this.socket.emit('offer', {\n            id,\n            message: peerConnection.localDescription,\n          });\n        });\n\n      peerConnection.ontrack = (event) =>\n        handleRemoteStreamAdded(event.streams[0], id);\n\n      peerConnection.onicecandidate = (event) => {\n        if (event.candidate) {\n          this.socket.emit('candidate', { id, message: event.candidate });\n        }\n      };\n    });\n\n    const handleRemoteHangup = (id) => {\n      this.remotePeers = this.remotePeers.filter(\n        (remotePeer) => id !== remotePeer.peerId\n      );\n      this.peerConnections[id] && this.peerConnections[id].close();\n      delete this.peerConnections[id];\n    };\n\n    const handleRemoteStreamAdded = (stream, id) => {\n      const matchedIndex = this.remotePeers.findIndex(peer => peer.peerId === id);\n      (matchedIndex === -1) && this.remotePeers.push({ peerId: id, stream: stream });\n    };\n\n    this.socket.on('offer', async (id, description) => {\n      const peerConnection = new RTCPeerConnection(this.config);\n      this.peerConnections[id] = peerConnection;\n      await navigator.mediaDevices\n        .getUserMedia(this.constraints)\n        .then((stream) => {\n          stream\n            .getTracks()\n            .forEach((track) => peerConnection.addTrack(track, stream));\n        });\n\n      peerConnection\n        .setRemoteDescription(description)\n        .then(() => peerConnection.createAnswer())\n        .then((sdp) => peerConnection.setLocalDescription(sdp))\n        .then(() => {\n          this.socket.emit('answer', {\n            id,\n            message: peerConnection.localDescription,\n          });\n        });\n      peerConnection.ontrack = (event) =>\n        handleRemoteStreamAdded(event.streams[0], id);\n      peerConnection.onicecandidate = (event) => {\n        if (event.candidate) {\n          this.socket.emit('candidate', { id, message: event.candidate });\n        }\n      };\n    });\n\n    this.socket.on('candidate', (id, candidate) => {\n      this.peerConnections[id]\n        .addIceCandidate(new RTCIceCandidate(candidate))\n        .catch((e) => console.error(e));\n    });\n\n    this.socket.on('answer', (id, description) => {\n      this.peerConnections[id].setRemoteDescription(description);\n    });\n\n    this.socket.on('full', (room) => {\n      alert('Room ' + room + ' is full');\n    });\n\n    this.socket.on('bye', (id) => {\n      handleRemoteHangup(id);\n    });\n\n    window.onunload = window.onbeforeunload = function () {\n      this.socket.close();\n    };\n  }\n}\n","<div class=\"row border h-75 no-gutters\">\n  <div class=\"col-9 bg-light border h-100 d-flex justify-content-center overlay-container\" >\n      <video class=\"border border-danger w-100 h-100\" autoplay playsinline #myVideo>\n      </video>      \n  </div>\n\n</div>\n\n<div class=\"row flex-nowrap room-members\">\n  <div class=\"col\" *ngFor=\"let remotePeer of remotePeers\">\n    <div>User {{remotePeer?.peerId}} </div>\n      <video [id]=\"remotePeer?.peerId\" class=\"border border-danger w-100 h-100\" autoplay playsinline [srcObject]=\"(remotePeer?.stream)\">\n        \n      </video>\n  </div>\n</div>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { SocketIoModule, SocketIoConfig } from 'ngx-socket-io';\nimport { AppComponent } from './app.component';\n\nconst config: SocketIoConfig = { url: 'http://localhost:3100', options: {}  };\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    SocketIoModule.forRoot(config)\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","/* (ignored) */"],"sourceRoot":"webpack:///"}